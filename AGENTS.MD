## AGENTS.MD ‚Äî Slipknot Merch Web-Store (–æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π)

**Course project:** –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ WEB-—Å–∞–π—Ç–∞ –¥–ª—è –º–∞–≥–∞–∑–∏–Ω–∞ –º–µ—Ä—á–∞ –≥—Ä—É–ø–ø—ã Slipknot
**Student:** –§–∏–æ–Ω–æ–≤ –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏–Ω (–ò–°–∏–ü, 4 –∫—É—Ä—Å)
**Stack:** Vue 3 + NestJS + PostgreSQL
**Environment:** TypeScript, Node.js

---

### üéØ Mission

–°–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π web-—Å–∞–π—Ç –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ –º–µ—Ä—á–∞ –≥—Ä—É–ø–ø—ã Slipknot.

–¢–µ–∫—É—â–∏–µ —Ü–µ–ª–∏:

1. –ü–µ—Ä–µ–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (—É—á–µ—Å—Ç—å —Ä–∞–∑–º–µ—Ä—ã, –æ—Å—Ç–∞—Ç–∫–∏, –æ—Ç–∑—ã–≤—ã).
2. –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å backend –ø–æ–¥ –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î.
3. –î–æ–±–∞–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –æ—Ç–∑—ã–≤–æ–≤ —Å –º–æ–¥–µ—Ä–∞—Ü–∏–µ–π.
4. –û–±–Ω–æ–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É —Ç–æ–≤–∞—Ä–∞ (–≤—ã–±–æ—Ä —Ä–∞–∑–º–µ—Ä–∞, –æ—Å—Ç–∞—Ç–æ–∫ –Ω–∞ —Å–∫–ª–∞–¥–µ).
5. –î–æ–±–∞–≤–∏—Ç—å –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å (Excel + –≥—Ä–∞—Ñ–∏–∫–∏ –ø—Ä–æ–¥–∞–∂).

---

### ‚öôÔ∏è Development Context

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è                        |
| --------- | --------------------------------- |
| Frontend  | Vue 3 + Vite + Pinia + Vue Router |
| Backend   | NestJS + TypeORM                  |
| Database  | PostgreSQL                        |
| Auth      | JWT (access + refresh)            |
| Docs      | Swagger                           |
| Reports   | ExcelJS / Chart.js                |
| UI        | –ù–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ                  |

---

### üß± Database (–æ–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)

#### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏—è–º (–ø–æ —Ä–∞–∑–¥–µ–ª—É 3.1‚Äì3.3)

‚úÖ **> 8 —Ç–∞–±–ª–∏—Ü:**
`users`, `roles`, `permissions`, `role_permissions`, `products`, `product_sizes`, `size_stock`, `reviews`, `orders`, `order_items`, `categories`, `audit_log`.

‚úÖ **3 –ù–§:**
–û—Ç–¥–µ–ª—å–Ω—ã–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ (`categories`, `roles`, `permissions`), —Å–≤—è–∑–∏ —á–µ—Ä–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã (`role_permissions`, `product_sizes`).
–ê–¥—Ä–µ—Å–∞ –∏ –∑–∞–∫–∞–∑—ã –æ—Ç–¥–µ–ª–µ–Ω—ã –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

‚úÖ **–°–≤—è–∑–∏:**

* 1:1 ‚Äî –∫–æ—Ä–∑–∏–Ω–∞ ‚Üî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å;
* 1:–ú ‚Äî —Ç–æ–≤–∞—Ä—ã ‚Üî –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —Ç–æ–≤–∞—Ä—ã ‚Üî –æ—Ç–∑—ã–≤—ã;
* –ú:–ú ‚Äî —Ä–æ–ª–∏ ‚Üî –ø—Ä–∞–≤–∞, —Ç–æ–≤–∞—Ä—ã ‚Üî —Ä–∞–∑–º–µ—Ä—ã.

‚úÖ **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:** FOREIGN KEY, UNIQUE, CHECK, NOT NULL.
‚úÖ **VIEW:** `vw_order_summary`, `vw_sales_by_day`.
‚úÖ **–ê—É–¥–∏—Ç:** `audit_log` + —Ç—Ä–∏–≥–≥–µ—Ä—ã.
‚ö†Ô∏è **CRUD:** —Ä–∞—Å—à–∏—Ä–∏—Ç—å –Ω–∞ –≤—Å–µ —Å—É—â–Ω–æ—Å—Ç–∏ (–æ—Å–æ–±–µ–Ω–Ω–æ –æ—Ç–∑—ã–≤—ã, —Ä–∞–∑–º–µ—Ä—ã, –æ—Å—Ç–∞—Ç–∫–∏).
‚ö†Ô∏è **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:** –¥–æ–±–∞–≤–∏—Ç—å BEGIN / COMMIT / ROLLBACK –ø—Ä–∏ —Å–ª–æ–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö.

---

### üß© –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã (–∫–ª—é—á–µ–≤—ã–µ)

```sql
-- —Ä–∞–∑–º–µ—Ä—ã –∏ –æ—Å—Ç–∞—Ç–∫–∏
CREATE TABLE product_sizes (
  id SERIAL PRIMARY KEY,
  product_id INT REFERENCES products(id),
  size VARCHAR(8) NOT NULL
);

CREATE TABLE size_stock (
  id SERIAL PRIMARY KEY,
  size_id INT REFERENCES product_sizes(id),
  stock INT CHECK (stock >= 0)
);

-- –æ—Ç–∑—ã–≤—ã
CREATE TABLE reviews (
  id SERIAL PRIMARY KEY,
  user_id INT REFERENCES users(id),
  product_id INT REFERENCES products(id),
  rating INT CHECK (rating BETWEEN 1 AND 5),
  comment TEXT,
  status VARCHAR(16) DEFAULT 'pending',
  created_at TIMESTAMP DEFAULT NOW()
);
```

---

### üß† Agent Role ‚Äî Full-Stack Developer & DB Architect

Codex –¥–æ–ª–∂–µ–Ω:

* –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –ë–î —Å —É—á—ë—Ç–æ–º –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü –∏ —Å–≤—è–∑–µ–π;
* –æ–±–Ω–æ–≤–∏—Ç—å backend (–º–æ–¥—É–ª–∏, DTO, —Å–µ—Ä–≤–∏—Å—ã) –ø–æ–¥ –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É;
* –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤—ã –∏ –ø–∞–Ω–µ–ª—å –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞;
* –¥–æ–±–∞–≤–∏—Ç—å –≤—ã–±–æ—Ä —Ä–∞–∑–º–µ—Ä–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤ –≤ –∫–∞—Ä—Ç–æ—á–∫–µ —Ç–æ–≤–∞—Ä–∞;
* —Å–æ–∑–¥–∞—Ç—å –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å –≤ Excel –∏ –≥—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–¥–∞–∂.

---

### üîß –≠—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (Tasks)

#### TASK 1 ‚Äî Database Rework

* –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å `backend/database/schema.sql` –ø–æ–¥ –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É.
* –î–æ–±–∞–≤–∏—Ç—å seed-–¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–∑–º–µ—Ä–æ–≤, –æ—Ç–∑—ã–≤–æ–≤, –æ—Å—Ç–∞—Ç–∫–æ–≤.
* –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é (3–ù–§ –∏ —Å–≤—è–∑–∏).
* –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ `psql` –∏ –≤—ã–≤–µ—Å—Ç–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç SELECT.

#### TASK 2 ‚Äî Backend Update

* –û–±–Ω–æ–≤–∏—Ç—å Entity, DTO, Service, Controller.
* –î–æ–±–∞–≤–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

  * `POST /reviews`, `GET /reviews/:product_id`
  * `GET /products/:id/sizes`
* –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é.

#### TASK 3 ‚Äî Reviews Module

* –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏.
* –ê–¥–º–∏–Ω –≤–∏–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –æ—Ç–∑—ã–≤–æ–≤, –º–æ–∂–µ—Ç –æ–¥–æ–±—Ä–∏—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å.

#### TASK 4 ‚Äî Product Card Update

* –í Vue-—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –¥–æ–±–∞–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ä–∞–∑–º–µ—Ä–æ–≤ –∏ –æ—Å—Ç–∞—Ç–æ–∫.
* –ö–Ω–æ–ø–∫–∞ ‚Äú–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É‚Äù –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –ø—Ä–∏ –Ω—É–ª–µ–≤–æ–º –æ—Å—Ç–∞—Ç–∫–µ.
* –í –ø–∞–Ω–µ–ª–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤.

#### TASK 5 ‚Äî Reporting & Analytics

* –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å Excel-–æ—Ç—á—ë—Ç –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º (`xlsx` —á–µ—Ä–µ–∑ ExcelJS).
* –î–æ–±–∞–≤–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (`Chart.js` / ECharts) —Å –¥–∞–Ω–Ω—ã–º–∏:

  * –¥–∞—Ç–∞, —Ü–µ–Ω–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥–∞–∂.
* –°–æ–∑–¥–∞—Ç—å VIEW `vw_sales_by_day`.

---

### üß∞ Pre-Task Setup

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å PostgreSQL –∏ –Ω–∞–ª–∏—á–∏–µ –±–∞–∑—ã `slipknot_shop`.
2. –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ ‚Äî —Å–æ–∑–¥–∞—Ç—å –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∫—Ä–∏–ø—Ç:

   ```bash
   psql -U postgres -d slipknot_shop -f backend/database/schema.sql
   ```
3. –í—ã–ø–æ–ª–Ω–∏—Ç—å `npm install` –¥–ª—è frontend –∏ backend.
4. –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ Codex –¥–æ–ª–∂–µ–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –∏ –ø—Ä–∏–ª–æ–∂–∏—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç—ã.

---

### üßæ Task Logging System

–ö–∞–∂–¥—ã–π —ç—Ç–∞–ø ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª –≤ `/Tasks/`:

```
Tasks/TASK_1_database-rework.MD
Tasks/TASK_2_backend-update.MD
...
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:

1. –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ
2. –ü—É—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
3. –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
4. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ (—Å–∫—Ä–∏–Ω—ã + –ª–æ–≥)
